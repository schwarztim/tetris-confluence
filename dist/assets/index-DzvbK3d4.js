var v=Object.defineProperty;var b=(n,e,t)=>e in n?v(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var o=(n,e,t)=>b(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();const u=10,f=20,l=30,P={I:"#00f5ff",O:"#ffdd00",T:"#bf00ff",S:"#00ff00",Z:"#ff0000",J:"#0000ff",L:"#ff8800"},y="#1a1a2e",m={SINGLE:100,DOUBLE:300,TRIPLE:500,TETRIS:800},I=10,w=1,L={I:3,O:4,T:3,S:3,Z:3,J:3,L:3},R={I:-2,O:-1,T:-1,S:-1,Z:-1,J:-1,L:-1},E={I:{0:[{x:0,y:0},{x:-2,y:0},{x:1,y:0},{x:-2,y:1},{x:1,y:-2}],1:[{x:0,y:0},{x:-1,y:0},{x:2,y:0},{x:-1,y:-2},{x:2,y:1}],2:[{x:0,y:0},{x:2,y:0},{x:-1,y:0},{x:2,y:-1},{x:-1,y:2}],3:[{x:0,y:0},{x:1,y:0},{x:-2,y:0},{x:1,y:2},{x:-2,y:-1}]},O:{0:[{x:0,y:0}],1:[{x:0,y:0}],2:[{x:0,y:0}],3:[{x:0,y:0}]},T:{0:[{x:0,y:0},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1}],1:[{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1},{x:-1,y:0}],2:[{x:0,y:0},{x:1,y:0},{x:-1,y:0},{x:0,y:-1},{x:0,y:1}],3:[{x:0,y:0},{x:-1,y:0},{x:0,y:-1},{x:0,y:1},{x:1,y:0}]},S:{0:[{x:0,y:0},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1}],1:[{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1},{x:-1,y:0}],2:[{x:0,y:0},{x:1,y:0},{x:-1,y:0},{x:0,y:-1},{x:0,y:1}],3:[{x:0,y:0},{x:-1,y:0},{x:0,y:-1},{x:0,y:1},{x:1,y:0}]},Z:{0:[{x:0,y:0},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1}],1:[{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1},{x:-1,y:0}],2:[{x:0,y:0},{x:1,y:0},{x:-1,y:0},{x:0,y:-1},{x:0,y:1}],3:[{x:0,y:0},{x:-1,y:0},{x:0,y:-1},{x:0,y:1},{x:1,y:0}]},J:{0:[{x:0,y:0},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1}],1:[{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1},{x:-1,y:0}],2:[{x:0,y:0},{x:1,y:0},{x:-1,y:0},{x:0,y:-1},{x:0,y:1}],3:[{x:0,y:0},{x:-1,y:0},{x:0,y:-1},{x:0,y:1},{x:1,y:0}]},L:{0:[{x:0,y:0},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1}],1:[{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1},{x:-1,y:0}],2:[{x:0,y:0},{x:1,y:0},{x:-1,y:0},{x:0,y:-1},{x:0,y:1}],3:[{x:0,y:0},{x:-1,y:0},{x:0,y:-1},{x:0,y:1},{x:1,y:0}]}},A={I:{0:[[!1,!1,!1,!1],[!0,!0,!0,!0],[!1,!1,!1,!1],[!1,!1,!1,!1]],1:[[!1,!1,!0,!1],[!1,!1,!0,!1],[!1,!1,!0,!1],[!1,!1,!0,!1]],2:[[!1,!1,!1,!1],[!1,!1,!1,!1],[!0,!0,!0,!0],[!1,!1,!1,!1]],3:[[!1,!0,!1,!1],[!1,!0,!1,!1],[!1,!0,!1,!1],[!1,!0,!1,!1]]},O:{0:[[!0,!0],[!0,!0]],1:[[!0,!0],[!0,!0]],2:[[!0,!0],[!0,!0]],3:[[!0,!0],[!0,!0]]},T:{0:[[!1,!0,!1],[!0,!0,!0],[!1,!1,!1]],1:[[!1,!0,!1],[!1,!0,!0],[!1,!0,!1]],2:[[!1,!1,!1],[!0,!0,!0],[!1,!0,!1]],3:[[!1,!0,!1],[!0,!0,!1],[!1,!0,!1]]},S:{0:[[!1,!0,!0],[!0,!0,!1],[!1,!1,!1]],1:[[!1,!0,!1],[!1,!0,!0],[!1,!1,!0]],2:[[!1,!1,!1],[!1,!0,!0],[!0,!0,!1]],3:[[!0,!1,!1],[!0,!0,!1],[!1,!0,!1]]},Z:{0:[[!0,!0,!1],[!1,!0,!0],[!1,!1,!1]],1:[[!1,!1,!0],[!1,!0,!0],[!1,!0,!1]],2:[[!1,!1,!1],[!0,!0,!1],[!1,!0,!0]],3:[[!1,!0,!1],[!0,!0,!1],[!0,!1,!1]]},J:{0:[[!0,!1,!1],[!0,!0,!0],[!1,!1,!1]],1:[[!1,!0,!1],[!1,!0,!1],[!0,!0,!1]],2:[[!1,!1,!1],[!0,!0,!0],[!1,!1,!0]],3:[[!1,!0,!0],[!1,!0,!1],[!1,!0,!1]]},L:{0:[[!1,!1,!0],[!0,!0,!0],[!1,!1,!1]],1:[[!0,!0,!1],[!1,!0,!1],[!1,!0,!1]],2:[[!1,!1,!1],[!0,!0,!0],[!0,!1,!1]],3:[[!1,!0,!1],[!1,!0,!1],[!1,!0,!0]]}};function x(n,e){return A[n][e]}function G(n,e){return e?(n+1)%4:(n+3)%4}const C=["I","O","T","S","Z","J","L"];function p(){return C[Math.floor(Math.random()*C.length)]}class O{constructor(){o(this,"board");o(this,"clearedRows");this.board=this.createEmptyBoard(),this.clearedRows=[]}createEmptyBoard(){const e=[];for(let t=0;t<f;t++){const s=[];for(let r=0;r<u;r++)s.push({filled:!1,color:y});e.push(s)}return e}reset(){this.board=this.createEmptyBoard(),this.clearedRows=[]}getBoard(){return this.board}isValidPosition(e){const t=x(e.type,e.rotation);for(let s=0;s<t.length;s++)for(let r=0;r<t[s].length;r++)if(t[s][r]){const i=e.x+r,a=e.y+s;if(i<0||i>=u||a>=f||a>=0&&this.board[a][i].filled)return!1}return!0}lockPiece(e){const t=x(e.type,e.rotation);for(let s=0;s<t.length;s++)for(let r=0;r<t[s].length;r++)if(t[s][r]){const i=e.x+r,a=e.y+s;a>=0&&a<f&&i>=0&&i<u&&(this.board[a][i]={filled:!0,color:e.color})}}clearLines(){this.clearedRows=[];let e=0;for(let t=f-1;t>=0;t--)this.isLineFull(t)&&(this.clearRow(t),this.clearedRows.push(t),e++,t++);return e}isLineFull(e){for(let t=0;t<u;t++)if(!this.board[e][t].filled)return!1;return!0}clearRow(e){for(let t=e;t>0;t--)for(let s=0;s<u;s++)this.board[t][s]=this.board[t-1][s];for(let t=0;t<u;t++)this.board[0][t]={filled:!1,color:y}}isGameOver(){for(let e=0;e<u;e++)if(this.board[0][e].filled)return!0;return!1}getCell(e,t){return e<0||e>=u||t<0||t>=f?{filled:!1,color:y}:this.board[t][e]}getDropPosition(e){let t=e.y;for(;this.isValidPosition({...e,y:t+1});)t++;return{...e,y:t}}}function g(n,e=0){return{type:n,rotation:e,x:L[n],y:R[n],color:P[n]}}class S{constructor(){o(this,"gameCanvas");o(this,"gameCtx");o(this,"nextCanvas");o(this,"nextCtx");o(this,"holdCanvas");o(this,"holdCtx");o(this,"tetrisBoard",null);this.gameCanvas=document.getElementById("game-canvas"),this.gameCtx=this.gameCanvas.getContext("2d"),this.nextCanvas=document.getElementById("next-canvas"),this.nextCtx=this.nextCanvas.getContext("2d"),this.holdCanvas=document.getElementById("hold-canvas"),this.holdCtx=this.holdCanvas.getContext("2d")}setBoard(e){this.tetrisBoard=e}clearGame(){this.gameCtx.fillStyle=y,this.gameCtx.fillRect(0,0,u*l,f*l)}clearNext(){this.nextCtx.fillStyle="#1a1a2e",this.nextCtx.fillRect(0,0,100,80)}clearHold(){this.holdCtx.fillStyle="#1a1a2e",this.holdCtx.fillRect(0,0,100,80)}renderBoard(e){this.clearGame();for(let t=0;t<f;t++)for(let s=0;s<u;s++){const r=e[t][s];this.drawCell(this.gameCtx,s,t,r.filled?r.color:y)}}renderPiece(e,t=!1){const s=x(e.type,e.rotation);for(let r=0;r<s.length;r++)for(let i=0;i<s[r].length;i++)if(s[r][i]){const a=e.x+i,h=e.y+r;h>=0&&h<f&&a>=0&&a<u&&this.drawCell(this.gameCtx,a,h,t?this.adjustColor(e.color,.3):e.color)}}renderGhost(e){if(!this.tetrisBoard)return;const t=this.tetrisBoard.getDropPosition(e);this.renderPiece(t,!0)}isValidPosition(e){const t=x(e.type,e.rotation);for(let s=0;s<t.length;s++)for(let r=0;r<t[s].length;r++)if(t[s][r]){const i=e.x+r,a=e.y+s;if(i<0||i>=u||a>=f)return!1}return!0}renderNextPiece(e){if(this.clearNext(),!e)return;const t=P[e],s=x(e,0),r=s[0].length*20,i=s.length*20,a=(100-r)/2,h=(80-i)/2;for(let c=0;c<s.length;c++)for(let d=0;d<s[c].length;d++)s[c][d]&&this.drawMiniCell(this.nextCtx,a+d*20,h+c*20,t)}renderHoldPiece(e){if(this.clearHold(),!e)return;const t=P[e],s=x(e,0),r=s[0].length*20,i=s.length*20,a=(100-r)/2,h=(80-i)/2;for(let c=0;c<s.length;c++)for(let d=0;d<s[c].length;d++)s[c][d]&&this.drawMiniCell(this.holdCtx,a+d*20,h+c*20,t)}drawCell(e,t,s,r){const i=t*l,a=s*l;e.fillStyle=r,e.fillRect(i+1,a+1,l-2,l-2),e.fillStyle="rgba(255, 255, 255, 0.3)",e.fillRect(i+1,a+1,l-2,3),e.fillRect(i+1,a+1,3,l-2),e.fillStyle="rgba(0, 0, 0, 0.2)",e.fillRect(i+1,a+l-4,l-2,3),e.fillRect(i+l-4,a+1,3,l-2)}drawMiniCell(e,t,s,r){e.fillStyle=r,e.fillRect(t+1,s+1,18,18),e.fillStyle="rgba(255, 255, 255, 0.3)",e.fillRect(t+1,s+1,18,2),e.fillRect(t+1,s+1,2,18),e.fillStyle="rgba(0, 0, 0, 0.2)",e.fillRect(t+1,s+16,18,2),e.fillRect(t+16,s+1,2,18)}adjustColor(e,t){const s=e.replace("#",""),r=Math.floor(parseInt(s.slice(0,2),16)*t),i=Math.floor(parseInt(s.slice(2,4),16)*t),a=Math.floor(parseInt(s.slice(4,6),16)*t);return`rgb(${r}, ${i}, ${a})`}updateScore(e,t,s){document.getElementById("score").textContent=e.toString(),document.getElementById("lines").textContent=t.toString(),document.getElementById("level").textContent=s.toString()}showGameOver(){document.getElementById("game-over").classList.remove("hidden")}hideGameOver(){document.getElementById("game-over").classList.add("hidden")}showPause(){document.getElementById("pause").classList.remove("hidden")}hidePause(){document.getElementById("pause").classList.add("hidden")}}class V{constructor(e){o(this,"bindings",{});o(this,"keysPressed",new Set);o(this,"repeatDelays",new Map);o(this,"repeatIntervals",new Map);o(this,"INITIAL_DELAY",150);o(this,"REPEAT_INTERVAL",50);this.bindings=e,this.setupListeners()}setupListeners(){document.addEventListener("keydown",e=>this.handleKeyDown(e)),document.addEventListener("keyup",e=>this.handleKeyUp(e))}handleKeyDown(e){if(this.keysPressed.has(e.code))return;this.keysPressed.add(e.code);const t=this.getAction(e.code);t&&this.bindings[t]&&(e.preventDefault(),this.bindings[t](),["left","right","down"].includes(t)&&this.startRepeat(t))}handleKeyUp(e){this.keysPressed.delete(e.code);const t=this.getAction(e.code);t&&this.stopRepeat(t)}getAction(e){return{ArrowLeft:"left",ArrowRight:"right",ArrowDown:"down",ArrowUp:"rotateCW",KeyZ:"rotateCCW",Space:"hardDrop",KeyC:"hold",KeyP:"pause",KeyR:"restart"}[e]||null}startRepeat(e){if(this.repeatDelays.has(e))return;const t=window.setTimeout(()=>{const s=window.setInterval(()=>{this.bindings[e]&&this.bindings[e]()},this.REPEAT_INTERVAL);this.repeatIntervals.set(e,s)},this.INITIAL_DELAY);this.repeatDelays.set(e,t)}stopRepeat(e){const t=this.repeatDelays.get(e);t&&(clearTimeout(t),this.repeatDelays.delete(e));const s=this.repeatIntervals.get(e);s&&(clearInterval(s),this.repeatIntervals.delete(e))}destroy(){this.repeatDelays.forEach(e=>clearTimeout(e)),this.repeatIntervals.forEach(e=>clearInterval(e)),this.repeatDelays.clear(),this.repeatIntervals.clear()}}class D{constructor(){o(this,"audioContext",null);o(this,"masterGain",null);o(this,"enabled",!0);this.initContext()}initContext(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.masterGain=this.audioContext.createGain(),this.masterGain.gain.value=.3,this.masterGain.connect(this.audioContext.destination)}catch{console.warn("Web Audio API not supported"),this.enabled=!1}}ensureContext(){return!this.enabled||!this.audioContext||!this.masterGain?!1:(this.audioContext.state==="suspended"&&this.audioContext.resume(),!0)}playRotate(){if(!this.ensureContext())return;const e=this.audioContext.createOscillator(),t=this.audioContext.createGain();e.type="square",e.frequency.setValueAtTime(220,this.audioContext.currentTime),e.frequency.exponentialRampToValueAtTime(440,this.audioContext.currentTime+.05),t.gain.setValueAtTime(.1,this.audioContext.currentTime),t.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.05),e.connect(t),t.connect(this.masterGain),e.start(),e.stop(this.audioContext.currentTime+.05)}playLineClear(e){if(!this.ensureContext())return;const t=e>=4?400:300,s=e>=4?.3:.15;for(let r=0;r<e;r++)setTimeout(()=>{const i=this.audioContext.createOscillator(),a=this.audioContext.createGain();i.type="square",i.frequency.setValueAtTime(t+r*50,this.audioContext.currentTime),i.frequency.exponentialRampToValueAtTime(t+r*100,this.audioContext.currentTime+s),a.gain.setValueAtTime(.15,this.audioContext.currentTime),a.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+s),i.connect(a),a.connect(this.masterGain),i.start(),i.stop(this.audioContext.currentTime+s)},r*50)}playTetris(){if(!this.ensureContext())return;const e=[523.25,659.25,783.99,1046.5],t=.1;e.forEach((s,r)=>{setTimeout(()=>{const i=this.audioContext.createOscillator(),a=this.audioContext.createGain();i.type="square",i.frequency.setValueAtTime(s,this.audioContext.currentTime),a.gain.setValueAtTime(.15,this.audioContext.currentTime),a.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),i.connect(a),a.connect(this.masterGain),i.start(),i.stop(this.audioContext.currentTime+t)},r*80)})}playGameOver(){if(!this.ensureContext())return;const e=[392,349.23,329.63,293.66,261.63],t=.2;e.forEach((s,r)=>{setTimeout(()=>{const i=this.audioContext.createOscillator(),a=this.audioContext.createGain();i.type="sawtooth",i.frequency.setValueAtTime(s,this.audioContext.currentTime),a.gain.setValueAtTime(.15,this.audioContext.currentTime),a.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+t),i.connect(a),a.connect(this.masterGain),i.start(),i.stop(this.audioContext.currentTime+t)},r*150)})}playHardDrop(){if(!this.ensureContext())return;const e=this.audioContext.createOscillator(),t=this.audioContext.createGain();e.type="square",e.frequency.setValueAtTime(150,this.audioContext.currentTime),e.frequency.exponentialRampToValueAtTime(50,this.audioContext.currentTime+.1),t.gain.setValueAtTime(.15,this.audioContext.currentTime),t.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.1),e.connect(t),t.connect(this.masterGain),e.start(),e.stop(this.audioContext.currentTime+.1)}playHold(){if(!this.ensureContext())return;const e=this.audioContext.createOscillator(),t=this.audioContext.createGain();e.type="square",e.frequency.setValueAtTime(600,this.audioContext.currentTime),e.frequency.exponentialRampToValueAtTime(800,this.audioContext.currentTime+.08),t.gain.setValueAtTime(.1,this.audioContext.currentTime),t.gain.exponentialRampToValueAtTime(.01,this.audioContext.currentTime+.08),e.connect(t),t.connect(this.masterGain),e.start(),e.stop(this.audioContext.currentTime+.08)}setEnabled(e){this.enabled=e}isEnabled(){return this.enabled}}function B(n,e){let t=0,s=!1,r=!1,i=!1,a=!1;switch(n){case 1:t=m.SINGLE*e,a=!0;break;case 2:t=m.DOUBLE*e,i=!0;break;case 3:t=m.TRIPLE*e,r=!0;break;case 4:t=m.TETRIS*e,s=!0;break;default:t=0}return{score:t,linesCleared:n,isTetris:s,isTriple:r,isDouble:i,isSingle:a}}function k(n){const e=Math.floor(n/I)+w;return Math.min(e,20)}function T(n){return{1:1e3,2:900,3:800,4:700,5:600,6:500,7:400,8:300,9:200,10:180,11:160,12:140,13:120,14:100,15:80,16:60,17:50,18:40,19:30,20:20}[n]||20}class N{constructor(){o(this,"board");o(this,"renderer");o(this,"input");o(this,"audio");o(this,"state");o(this,"animationFrame",0);o(this,"lastTime",0);o(this,"dropCounter",0);o(this,"dropInterval",1e3);this.board=new O,this.renderer=new S,this.renderer.setBoard(this.board),this.audio=new D,this.state=this.createInitialState(),this.input=new V({left:()=>this.moveLeft(),right:()=>this.moveRight(),down:()=>this.moveDown(),rotateCW:()=>this.rotate(!0),rotateCCW:()=>this.rotate(!1),hardDrop:()=>this.hardDrop(),hold:()=>this.hold(),pause:()=>this.togglePause(),restart:()=>this.restart()}),this.startGame()}createInitialState(){return{board:[],currentPiece:null,nextPiece:null,holdPiece:null,canHold:!0,score:0,lines:0,level:1,isPaused:!1,isGameOver:!1,lastDrop:0}}startGame(){this.state=this.createInitialState(),this.board.reset(),this.renderer.hideGameOver(),this.renderer.hidePause(),this.state.nextPiece=p(),this.spawnPiece(),this.lastTime=0,this.dropCounter=0,this.dropInterval=T(1),this.gameLoop(0)}spawnPiece(){this.state.nextPiece||(this.state.nextPiece=p());const e=this.state.nextPiece;this.state.currentPiece=g(e,0),this.state.nextPiece=p(),this.state.canHold=!0,this.renderer.renderNextPiece(this.state.nextPiece),this.board.isValidPosition(this.state.currentPiece)||this.gameOver()}gameLoop(e){this.animationFrame=requestAnimationFrame(s=>this.gameLoop(s));const t=e-this.lastTime;this.lastTime=e,!(this.state.isPaused||this.state.isGameOver)&&(this.dropCounter+=t,this.dropCounter>this.dropInterval&&this.drop(),this.render())}drop(){if(!this.state.currentPiece)return;const e={...this.state.currentPiece,y:this.state.currentPiece.y+1};this.board.isValidPosition(e)?this.state.currentPiece.y++:this.lockPiece(),this.dropCounter=0}lockPiece(){if(!this.state.currentPiece)return;this.board.lockPiece(this.state.currentPiece);const e=this.board.clearLines();if(e>0){const t=B(e,this.state.level);this.state.score+=t.score,this.state.lines+=e,this.state.level=k(this.state.lines),this.dropInterval=T(this.state.level),t.isTetris?this.audio.playTetris():e>0&&this.audio.playLineClear(e)}this.spawnPiece(),this.updateUI()}moveLeft(){if(!this.state.currentPiece||this.state.isPaused||this.state.isGameOver)return;const e={...this.state.currentPiece,x:this.state.currentPiece.x-1};this.board.isValidPosition(e)&&(this.state.currentPiece.x--,this.render())}moveRight(){if(!this.state.currentPiece||this.state.isPaused||this.state.isGameOver)return;const e={...this.state.currentPiece,x:this.state.currentPiece.x+1};this.board.isValidPosition(e)&&(this.state.currentPiece.x++,this.render())}moveDown(){if(!this.state.currentPiece||this.state.isPaused||this.state.isGameOver)return;const e={...this.state.currentPiece,y:this.state.currentPiece.y+1};this.board.isValidPosition(e)&&(this.state.currentPiece.y++,this.dropCounter=0,this.render())}rotate(e){if(!this.state.currentPiece||this.state.isPaused||this.state.isGameOver)return;const t=G(this.state.currentPiece.rotation,e),s={...this.state.currentPiece,rotation:t},r=e?this.state.currentPiece.rotation:t,i=E[this.state.currentPiece.type][r];for(const a of i){const h={...s,x:s.x+a.x,y:s.y+a.y};if(this.board.isValidPosition(h)){this.state.currentPiece=h,this.audio.playRotate(),this.render();return}}}hardDrop(){if(!this.state.currentPiece||this.state.isPaused||this.state.isGameOver)return;let e=0;for(;this.board.isValidPosition({...this.state.currentPiece,y:this.state.currentPiece.y+1});)this.state.currentPiece.y++,e++;e>0&&this.audio.playHardDrop(),this.lockPiece()}hold(){if(!this.state.currentPiece||!this.state.canHold||this.state.isPaused||this.state.isGameOver)return;const e=this.state.currentPiece.type;if(this.state.holdPiece===null)this.state.holdPiece=e,this.spawnPiece();else{const t=this.state.holdPiece;this.state.holdPiece=e,this.state.currentPiece=g(t,0)}this.state.canHold=!1,this.renderer.renderHoldPiece(this.state.holdPiece),this.audio.playHold(),this.render()}togglePause(){this.state.isGameOver||(this.state.isPaused=!this.state.isPaused,this.state.isPaused?this.renderer.showPause():(this.renderer.hidePause(),this.lastTime=performance.now()))}restart(){this.state.isGameOver=!1,this.state.isPaused=!1,this.audio.playGameOver(),this.startGame()}gameOver(){this.state.isGameOver=!0,this.renderer.showGameOver(),this.audio.playGameOver()}updateUI(){this.renderer.updateScore(this.state.score,this.state.lines,this.state.level)}render(){const e=this.board.getBoard();this.renderer.renderBoard(e),this.state.currentPiece&&(this.renderer.renderGhost(this.state.currentPiece),this.renderer.renderPiece(this.state.currentPiece))}destroy(){cancelAnimationFrame(this.animationFrame),this.input.destroy()}}new N;
